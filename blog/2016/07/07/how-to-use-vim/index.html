<p>–
layout: post
title: “将vim打造成IDE”
date: 2016-07-07 08:17:10 -0700
comments: true
categories: 编程工具
—</p>

<ul id="markdown-toc">
  <li><a href="#mac-osx--gvim" id="markdown-toc-mac-osx--gvim">Mac OSX 下安装 gvim</a></li>
  <li><a href="#section" id="markdown-toc-section">基本设置</a></li>
  <li><a href="#vim-" id="markdown-toc-vim-">vim 对单个字符的操作</a>    <ul>
      <li><a href="#section-1" id="markdown-toc-section-1">删除某个字符</a></li>
      <li><a href="#section-2" id="markdown-toc-section-2">替换某个字符</a></li>
      <li><a href="#section-3" id="markdown-toc-section-3">移动到某个字符</a></li>
    </ul>
  </li>
  <li><a href="#vim--1" id="markdown-toc-vim--1">vim 对单字的操作</a>    <ul>
      <li><a href="#section-4" id="markdown-toc-section-4">删除某个单字</a></li>
      <li><a href="#section-5" id="markdown-toc-section-5">修改某个单字</a></li>
      <li><a href="#section-6" id="markdown-toc-section-6">移动到某个单字</a></li>
    </ul>
  </li>
  <li><a href="#vim--2" id="markdown-toc-vim--2">vim 对整行的操作</a>    <ul>
      <li><a href="#section-7" id="markdown-toc-section-7">移动到行首或行尾</a></li>
      <li><a href="#section-8" id="markdown-toc-section-8">移动到指定行</a></li>
      <li><a href="#section-9" id="markdown-toc-section-9">使用标签记录并跳转到某行</a></li>
    </ul>
  </li>
  <li><a href="#vim--3" id="markdown-toc-vim--3">vim 寄存器</a></li>
  <li><a href="#vim--4" id="markdown-toc-vim--4">vim 分屏功能</a></li>
</ul>

<p><code>Vim</code> 是一个学习成本比较高的编辑器。本文主要记录对于编辑浏览代码时，如何配置<code>vim</code>才能更高效的编辑、浏览代码。</p>

<!--more-->

<h2 id="mac-osx--gvim">Mac OSX 下安装 gvim</h2>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">brew install macvim</span></code></pre></td></tr></table></div></figure>

<h2 id="section">基本设置</h2>

<p>配置信息都放到了<code>~/.vimrc</code>文件中：<br />
显示行号，在<code>.vimrc</code>中添加<code>set nu</code>  <br />
开启文件类型侦测, <code>filetype on</code><br />
根据侦测到的不同类型加载对应的插件， <code>filetype plugin on</code><br />
开启实时搜索功能，</p>

<h2 id="vim-">vim 对单个字符的操作</h2>

<blockquote>
  <p>To err is human. To really foul up you need a computer.</p>
</blockquote>

<h3 id="section-1">删除某个字符</h3>

<p>删除字符命令非常简单，就是单个字符<code>x</code>,例如上面的一行code，如果将光标至于<code>really</code>的<code>r</code>处执行<code>x</code>命令，就会将 <code>r</code> 删除。</p>

<h3 id="section-2">替换某个字符</h3>

<p>替换字符的命令<code>rx</code>将光标下的字符 replace 成字符<code>x</code>。如果发现连个相邻的字符颠倒了，可以直接在前一个字符处执行<code>xp</code>命令即可，其中的<code>x</code>时删除光标下的字符，<code>p</code>时黏贴。</p>

<h3 id="section-3">移动到某个字符</h3>

<p><code>fx</code>命令在一行中向前搜索单个字符<code>x</code>。速记：<code>f</code>此处是<code>Find</code>的简写。</p>

<p>例如，你现在处于上面 code 的开头处，假设你想将光标移动到<code>human</code>中的<code>h</code>字符处。此时你只需要简单的执行<code>fh</code>，光标将会跳转到<code>h</code>:</p>

<pre><code>To err is human.  To really foul up you need a computer. ~
----------&gt;---------------&gt;
    fh		 fy
</code></pre>

<p>上面命令也显示了<code>fy</code>移动光标到<code>really</code>的<code>y</code>处。当然，此时你也可以在命令前添加执行次数，可以用<code>3fl</code>命令跳转光标到<code>foult</code>的<code>l</code>处：</p>

<pre><code>To err is human.  To really foul up you need a computer. ~
	  ---------------------&gt;
		   3fl
</code></pre>

<p>与<code>f</code>相对应的<code>F</code>命令会向左搜索：</p>

<pre><code>To err is human.  To really foul up you need a computer. ~
	  &lt;---------------------
		    Fh
</code></pre>

<p>除了<code>fx</code>命令用于搜索一行中的某个特定字符外，还有<code>tx</code>命令，<code>tx</code>命令会停在搜索的字符<code>x</code>前。速记：<code>t</code>时<code>To</code>的简写。与<code>Fx</code>相对应的是<code>Tx</code>。</p>

<pre><code>To err is human.  To really foul up you need a computer. ~
	   &lt;------------  -------------&gt;
		Th		tn
</code></pre>

<p><code>fx</code><code>Fx</code><code>tx</code><code>Tx</code>这四个命令可以用<code>;</code>命令重复，<code>,</code>向相反的方向执行。</p>

<p>上面的移动命令虽然很好用，但有如果一行中存在多个我们想要查找的字符，我们要么人肉看一下搜索的字符位于第几个位置，要么要一直重复执行相同的移动命令。非常影响思维连贯性。例如想要从上面一行的开头找到<code>computer</code>中的<code>o</code>。
此时我们可以借助插件来完成，<code>easymotion</code>即可帮助我们，它会把所有满足条件的位置用[A-Za-z]间的标签字符标出来，找到你想要去的位置再键入对应标签字符即可快速到达。
比如，上面的例子，假设关闭在行首，我只需要键入<Leader><Leader>fo,所有字符a都被重新标记成a、b、c、d等等标签（原始内容不变），直接键入标签字母即可到达需要到达的地方。</Leader></Leader></p>

<h2 id="vim--1">vim 对单字的操作</h2>

<h3 id="section-4">删除某个单字</h3>

<p>删除某个单字非常简单，只需要在单字的开始执行<code>dw</code>即可。速记：<code>d</code>是<code>deleate</code>的简写。</p>

<h3 id="section-5">修改某个单字</h3>

<p>修改某个单字时，只需要在单字的开始执行<code>cxxxxx</code>即可，<code>c</code>是<code>change</code>的简写，<code>xxxxx</code>即代表要修改的单字。</p>

<h3 id="section-6">移动到某个单字</h3>

<p>想要移动光标大下一个单字，使用<code>w</code>命令。跟很多<code>vim</code>命令一样，可以在命令前添加一个执行次数。比如,<code>3w</code>就是移动 3 个单字。下面展示它是如何工作的：</p>

<pre><code>This is a line with example text ~
  ---&gt;--&gt;-&gt;-----------------&gt;
   w  w  w    3w
</code></pre>

<p>注意，<code>w</code>命令会移动到下一个单字的起始处。<br />
<code>b</code>命令向前移动到前一个单字的起始处。</p>

<pre><code>This is a line with example text ~
&lt;----&lt;--&lt;-&lt;---------&lt;---
   b   b b    2b      b
</code></pre>

<p>与<code>w</code><code>b</code>对应的有<code>e</code>和<code>ge</code>命令分别向后和向前移动到单字的末尾：</p>

<pre><code>This is a line with example text ~
   &lt;-   &lt;--- -----&gt;   ----&gt;
   ge    ge     e       e
</code></pre>

<p>如果光标位于一行的最后一个单字，<code>w</code>命令会带你到下一行的第一个单字处。因此你可以使用<code>w</code>命令来在一行中移动。</p>

<h2 id="vim--2">vim 对整行的操作</h2>

<h3 id="section-7">移动到行首或行尾</h3>

<p><code>$</code>命令移动光标到一行的结尾，与<code>&lt;End&gt;</code>键作用相同。<code>^</code>命令移动到一行的第一个非空白字符处。<code>0</code>命令移动到一行的最前面第一个字符处，与<code>&lt;Home&gt;</code>键作用相同。</p>

<pre><code>	  ^
     &lt;------------
.....This is a line with example text ~
&lt;-----------------   ---------------&gt;
	0		   $
</code></pre>

<p>(….指空白符)</p>

<h3 id="section-8">移动到指定行</h3>

<p>C/C++ 程序员应该经常能遇到程序出错时，会有类似如下的提示信息：</p>

<pre><code>prog.c:33: j   undeclared (first use in this function) ~
</code></pre>

<p>这就提示我们该跳转到 33 行 fix 掉错误，此时可以使用<code>G</code>命令：<code>33G</code>即可跳转到 33 行。
另一种方法是在<code>shell</code>命令行下执行<code>:33&lt;Enter&gt;</code>。
上面的两种方法都是假设你想要移动到某个特定的行，而不管该行是否可见。假如你想要移动到屏幕的中间或者起始行时，该如何操作呢？</p>

<pre><code>		+---------------------------+
	H --&gt;	| text sample text	    |
		| sample text		    |
		| text sample text	    |
		| sample text		    |
	M --&gt;	| text sample text	    |
		| sample text		    |
		| text sample text	    |
		| sample text		    |
	L --&gt;	| text sample text	    |
		+---------------------------+
</code></pre>

<p>速记：<code>H</code>是<code>Home</code>的简写，<code>M</code>是<code>Middle</code>的简写，<code>L</code>是<code>Last</code>的简写。</p>

<h3 id="section-9">使用标签记录并跳转到某行</h3>

<p>在介绍标签之前，先了解另外两个命令<code>CTRL-O</code>和<code>CTRL-I</code>，其中<code>CTRL-O</code>是回到之前的位置，<code>CTRL-I</code>是回到下一个位置。例如：</p>

<pre><code>     |	example text   ^	     |
33G  |	example text   |  CTRL-O     | CTRL-I
     |	example text   |	     |
     V	line 33 text   ^	     V
     |	example text   |	     |
   /^The |	example text   |  CTRL-O     | CTRL-I
     V	There you are  |	     V
	example text
</code></pre>

<p>注意：CTRL-I 是和 <Tab> 相同的。</Tab></p>

<p><code>vim</code>可以使你定义自己的标签。命令<code>ma</code>标记当前光标所在的位置。`{mark} 和 ‘{mark}都可以跳回到标签处。不同的是`{mark}跳回的是光标所在行的原来那一列，’{mark}跳回的是光标所在哪一行的起始位置。</p>

<h2 id="vim--3">vim 寄存器</h2>

<p>使用 vim 时，不管是复制、删除或粘贴，在 vim 中都是借助 register 实现的，vim 共有 9 类寄存器。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">寄存器种类</th>
      <th style="text-align: center">寄存器</th>
      <th style="text-align: center">寄存器描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">无名寄存器</td>
      <td style="text-align: center">””</td>
      <td style="text-align: center">缓存最后一个操作内容</td>
    </tr>
    <tr>
      <td style="text-align: center">数字寄存器</td>
      <td style="text-align: center">“0~”9</td>
      <td style="text-align: center">缓存最近操作内容</td>
    </tr>
    <tr>
      <td style="text-align: center">行内寄存器</td>
      <td style="text-align: center">”-</td>
      <td style="text-align: center">缓存行内删除内容</td>
    </tr>
    <tr>
      <td style="text-align: center">具名寄存器</td>
      <td style="text-align: center">“a~”z或”A~”Z</td>
      <td style="text-align: center">指定时可用</td>
    </tr>
    <tr>
      <td style="text-align: center">只读寄存器</td>
      <td style="text-align: center">”:,”.,”%,”#</td>
      <td style="text-align: center">分别缓存最近命令，最近插入文本，当前文件名，当前交替文件名</td>
    </tr>
    <tr>
      <td style="text-align: center">表达式寄存器</td>
      <td style="text-align: center">”=</td>
      <td style="text-align: center">只读，用于执行表达式命令</td>
    </tr>
    <tr>
      <td style="text-align: center">选择及拖拽寄存器</td>
      <td style="text-align: center">“*,”+,”~</td>
      <td style="text-align: center">存取GUI选择文本</td>
    </tr>
    <tr>
      <td style="text-align: center">黑洞寄存器</td>
      <td style="text-align: center">“_</td>
      <td style="text-align: center">不缓存操作内容</td>
    </tr>
    <tr>
      <td style="text-align: center">模式寄存器</td>
      <td style="text-align: center">”/</td>
      <td style="text-align: center">缓存最近的搜索模式</td>
    </tr>
  </tbody>
</table>

<h2 id="vim--4">vim 分屏功能</h2>

<image src="/images/vim_split_screen.png">

vim 同时打开多个文件。

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class=""><span class="line">vim -o file1 file2              //小写 o 参数来水平分屏
</span><span class="line">vim -O file1 file2              //大写 O 参数来垂直分屏</span></code></pre></td></tr></table></div></figure>

vim 在多窗口打开。

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class=""><span class="line">:vs path/file       //在新的垂直分屏中打开文件
</span><span class="line">:sv path/file       //在新的水平分屏中打开文件</span></code></pre></td></tr></table></div></figure>

多窗口间切换的3方法：`Ctrl+w+方向键``Ctrl+w+h/j/k/l``Ctrl+ww`。  

移动分屏的方法：`Ctrl+w L`向右移动分屏；`Ctrl+w H`向左移动分屏；`Ctrl+w K`向上移动分屏；`Ctrl+w J`向下移动分屏。  

## vim 插件安装

首先安装插件管理插件

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</span></code></pre></td></tr></table></div></figure>

其次在`.vimrc`下增加配置信息如下。

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
</pre></td><td class="code"><pre><code class=""><span class="line">" vundle 环境设置
</span><span class="line">filetype off
</span><span class="line">set rtp+=~/.vim/bundle/Vundle.vim
</span><span class="line">" vundle 管理的插件列表必须位于 vundle#begin() 和 vundle#end() 之间
</span><span class="line">call vundle#begin()
</span><span class="line">Plugin 'VundleVim/Vundle.vim'
</span><span class="line">Plugin 'altercation/vim-colors-solarized'
</span><span class="line">Plugin 'tomasr/molokai'
</span><span class="line">Plugin 'vim-scripts/phd'
</span><span class="line">Plugin 'Lokaltog/vim-powerline'
</span><span class="line">Plugin 'octol/vim-cpp-enhanced-highlight'
</span><span class="line">Plugin 'nathanaelkane/vim-indent-guides'
</span><span class="line">Plugin 'derekwyatt/vim-fswitch'
</span><span class="line">Plugin 'kshenoy/vim-signature'
</span><span class="line">Plugin 'vim-scripts/BOOKMARKS—Mark-and-Highlight-Full-Lines'
</span><span class="line">Plugin 'majutsushi/tagbar'
</span><span class="line">Plugin 'vim-scripts/indexer.tar.gz'
</span><span class="line">Plugin 'vim-scripts/DfrankUtil'
</span><span class="line">Plugin 'vim-scripts/vimprj'
</span><span class="line">Plugin 'dyng/ctrlsf.vim'
</span><span class="line">Plugin 'terryma/vim-multiple-cursors'
</span><span class="line">Plugin 'scrooloose/nerdcommenter'
</span><span class="line">Plugin 'vim-scripts/DrawIt'
</span><span class="line">Plugin 'SirVer/ultisnips'
</span><span class="line">Plugin 'Valloric/YouCompleteMe'
</span><span class="line">Plugin 'derekwyatt/vim-protodef'
</span><span class="line">Plugin 'scrooloose/nerdtree'
</span><span class="line">Plugin 'fholgado/minibufexpl.vim'
</span><span class="line">Plugin 'gcmt/wildfire.vim'
</span><span class="line">Plugin 'sjl/gundo.vim'
</span><span class="line">Plugin 'Lokaltog/vim-easymotion'
</span><span class="line">Plugin 'suan/vim-instant-markdown'
</span><span class="line">Plugin 'lilydjwg/fcitx.vim'
</span><span class="line">" 插件列表结束
</span><span class="line">call vundle#end()
</span><span class="line">filetype plugin indent on`</span></code></pre></td></tr></table></div></figure>

最后，进入`vim`执行

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">:PluginInstall</span></code></pre></td></tr></table></div></figure>

## vim 浏览代码

vim 浏览代码一般会与 `catgs` `cscope` `taglist` 等一起使用。  


</image>
