<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[分类:x264 | 懒人李冰]]></title>
  <link href="http://lazybing.github.io/blog/categories/x264/atom.xml" rel="self"/>
  <link href="http://lazybing.github.io/"/>
  <updated>2017-06-22T08:58:42-07:00</updated>
  <id>http://lazybing.github.io/</id>
  <author>
    <name><![CDATA[李冰]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[SODB RBSP EBSP 的区别与联系]]></title>
    <link href="http://lazybing.github.io/blog/2017/06/22/sodb-rbsp-ebsp/"/>
    <updated>2017-06-22T08:48:25-07:00</updated>
    <id>http://lazybing.github.io/blog/2017/06/22/sodb-rbsp-ebsp</id>
    <content type="html"><![CDATA[
<p>简单总结 SODB、RBSP、EBSP、NALU 和 H.264 字节流的联系。</p>

<!--more-->

<ul>
  <li>SODB：String of Data Bits，数据比特串，它是最原始的编码数据。</li>
  <li>RBSP：Raw Byte Sequence Payload, 原始字节序列载荷，它是在 SODB 的后面添加了结尾比特和若干比特<code>0</code>，以便字节对齐。</li>
  <li>EBSP：Encapsulate Byte Sequence Payload，扩展字节序列载荷，它是在 RBSP 基础上添加了防校验字节<code>0x03</code>后得到的。</li>
</ul>

<p>关系大致如下：</p>

<p><code>SODB</code>+<code>RBSP Stop bit</code>+<code>0 bits</code>= <code>RBSP</code></p>

<p><code>RBSP part1</code>+<code>0x03</code>+<code>RBSP part2</code>+<code>0x03</code>+…+<code>RBSP partn</code> = <code>EBSP</code></p>

<p><code>NALU Header</code>+<code>EBSP</code>=<code>NALU</code></p>

<p><code>start code</code>+<code>NALU</code>+…+<code>start code</code>+<code>NALU</code>=<code>H.264 Byte Stream</code></p>

<p>在 H264 SPEC 中，SODB 定义如下：
&gt;3.149 string of data bits(SODB) : A sequence of some number of bits representing syntax elements present within a raw byte sequence payload prior to the raw byte sequnece payload stop bit.Within an SODB,the left-most bit is considered to be the first and most significant bit,and the right-most bit is considered to be the last and least significant bit。</p>

<p>在 H264 SPEC 中，RBSP 定义如下：
&gt;3.118 raw byte sequence payload(RBSP): A syntax structure containing an integer number of bytes that is encapsulated in a NAL unit.An RBSP is either empty or has the form of a string of data bits containing syntax elements followed by an RBSp stop bit and followed by zero or more subsequent bits equal to 0.
&gt;3.119 raw byte sequence payload(RBSP) stop bit: A bit equal to 1 present within a raw byte sequence payload(RBSP) after a string of data bits.The location of the end of the string of data bits within an RBSP can be identified by searching from the end of the RBSP for the RBSP stop bit, which is the last non-zero bit in the RBSP.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[X264 下载、安装和使用]]></title>
    <link href="http://lazybing.github.io/blog/2017/06/09/x264-download-install-and-use/"/>
    <updated>2017-06-09T08:51:11-07:00</updated>
    <id>http://lazybing.github.io/blog/2017/06/09/x264-download-install-and-use</id>
    <content type="html"><![CDATA[<ul id="markdown-toc">
  <li><a href="#x264-" id="markdown-toc-x264-">x264 获取代码：</a></li>
  <li><a href="#x264--1" id="markdown-toc-x264--1">x264 编译和安装</a></li>
  <li><a href="#x264--2" id="markdown-toc-x264--2">x264 的使用</a></li>
</ul>

<p><a href="http://www.videolan.org/developers/x264.html">x264官网</a>对 x264 项目进行了简单的描述，包括
<!--more--></p>

<h2 id="x264-">x264 获取代码：</h2>

<p><code>
git clone http://git.videolan.org/git/x264.git
</code></p>

<h2 id="x264--1">x264 编译和安装</h2>

<p>此处记录的是在Linux下的编译和安装：</p>

<p><code>
cd x264
.configure
sudo make
sudo make install
</code></p>

<p>注意，如果想要在 Linux 下使用 GDB 进行逐步调试，需要修改<code>.configure</code>后生成的<code>config.mak</code>文件，将里面的<code>CC=gcc</code>改为<code>CC=gcc -g</code>。</p>

<p>之后就可以使用 X264 来进行编码 H264 格式的视频了。</p>

<h2 id="x264--2">x264 的使用</h2>
<p>x264 的使用可以通过命令行<code>x264 --help</code>来获取。格式一般为<br />
<code>
x264 [options] -o outfile infile
</code></p>

<p>其中的输入文件可以是<code>raw</code>文件、<code>.y4m</code>文件等，输出文件格式可以是<code>.264</code>、<code>.mkv</code>、<code>.flv</code>和<code>.mp4</code>；其中输入文件如果是<code>raw</code>文件，需要在 infile 后面通过输入参数（–input-res 640x360）来指定分辨率。</p>
]]></content>
  </entry>
  
</feed>
