---
layout: post
title: "av1解码详解(一)"
date: 2018-10-15 07:43:02 -0700
comments: true
categories: AV1
---

* list element with functor item
{:toc}

[AV1](https://en.wikipedia.org/wiki/AV1)作为一个开放、免专利的视频编码格式，专为通过网络进行刘传书而设计。学习一个新的视频编解码标准除了看[SPEC](https://aomediacodec.github.io/av1-spec/av1-spec.pdf),最好的方法是看源码`aom`。

<!--more-->

# AV1 前期准备

* 安装`CMake`，版本需求 3.5 以上。
* 安装`Git`。
* 安装`Perl`。
* 对于`x86`,需要安装`yasm`或`nasm`。
* 安装`python`。

# 获取源码

```
$ git clone https://aomedia.googlesource.com/aom
```

# 编译

## 最简单的编译方法

```
$ cmake path/to/aom
$ make
```
上面的方法就可以用到`Linux`平台下，生成`aomdec`可执行文件，进行解码。

## Windows 下编译方法

```
$ make aom_vs
$ cd aom_vs
$ cmake /path/to/aom -G "Visual Studio 12 2013 Vin64" -DCONFIG_AV1_ENCODER=0 -DCONFIG_LOWBITDEPTH=0 -DAOM_TARGET_CPU=generic
```
此时在`aom_vs`路径下，会生成一个`AOM.sln`,用`VisualStudio 2013`打开该文件后，编译运行即可使用`VisualStudio`调试学习了。

## 交叉编译

```
$ make aom_armv7
$ cd aom_armv7
$ CFLAGS="-pie -fPIE" LDFLAGS="-pie -fpIE" cmake /path/to/aom -DCROSS=/path/to/cross_build_tool_bin/ -DCMAKE_TOOLCHAIN_FILE=/path/to/tools -DCONFIG_AV1_ENCODER=0 -DCONFIG_LOWBITDEPTH=0
$ make
```

# 配置选项

上面再编译的过程中，已经提到了很多配置选项，例如`-DCONFIG_AV1_ENCODER=0`表示不编译`av1 encoder`。

