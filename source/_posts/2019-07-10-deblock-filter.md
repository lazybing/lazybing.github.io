---
layout: post
title: "AV1(DAV1D) 解码详解(五)之DEBLOCK FILTER"
date: 2019-07-10 07:07:33 -0700
comments: true
categories: av1
---

AV1 使用了非常多的环路滤波器工具应用于解码帧。环路滤波的第一个阶段是去块滤波器(Deblocking Filter)。该滤波器与 VP9 中使用的滤波器基本相同，只是做了很小的改动————最长滤波从 VP9 的 15 抽头降成了 13 抽头。除了去块滤波器，AV1 还采用了CDEF 滤波器、Loop Restoration 滤波器、Film Grain 滤波器。  
去块滤波器是视频编解码中的重要组成部分，其核心作用在于消除编码过程中产生的图像块效应。图像中的块效应产生原因主要是以宏块为基本单元的编码结构而产生。在编码中，每个宏块的子块都会按照既定分割方式进行预测、变换和量化编码。在这个过程中可能导致块效应的因素有以下几个：  

* 由于变换和量化编码的运算精度误差导致边界出现不连续。  
* 由于码率设置较低，量化强度较大，或者相邻宏块的量化参数不一致导致重建图像的细节部分产生差异。  
* 由于运动补偿时的参考块位置与当前块位置关系不一致导致重建像素的内容实际上缺乏相关性。  



